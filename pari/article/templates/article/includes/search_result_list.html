{% load i18n verbatim_tag mezzanine_tags article_tags article_filters keyword_tags %}
<div id="article-list" data-filter-endpoint="search_filter" data-filter-args-q="{{ query }}">
    <div id="articles" class="heading row">
        <h3 class="span10">Articles for "{{ query }}"</h3>
        <div class="type-filters span2">
            <div>Filter by type:</div>
            {% for type in result_types %}
            <a class="type-filter" data-filter="{{type}}" data-toggle="tooltip" title="" data-original-title="{{type}}"><i class="icon-exchange"></i></a>
            {% endfor %}
        </div>
    </div>
<div class="articles">
    {% for article in articles %}
    <div class="article ">
        <div class="article-image">
            {% list_media_for article 278 225 %}
        </div>
        <div class="caption">
            <h4><a href="{{ article.get_absolute_url }}">{{ article.title }}</a></h4>
            <p>{{ article.location.title }}</p>
            <p>by {{ article.user.username }}</p>
            <p>{{ article.description }}</p>
            {% keywords_for article as keywords %}
            {% for keyword in keywords %}
                    <span class="tag">
                        <a href="{% url 'keyword-detail' keyword.title %}">{{ keyword }}</a>
                    </span>
            {% endfor %}
        </div>
    </div>
    {%empty %}
    No articles to display. Try clearing filter.
    {% endfor %}
    <div class="paginator">
        <ul>
            {% if articles.has_previous %}
            <li class="page-nav" data-page="1"><a href="?page=1"><i class="icon-double-angle-left"></i></a></li>
            <li class="page-nav" data-page="{{ articles.previous_page_number }}"><a href="?page={{ articles.previous_page_number }}"><i class="icon-angle-left"></i></a></li>
            {% endif %}

            {% for page in articles.paginator.page_range %}
            <li class="{% if page == articles.number %}active{% endif %}" data-page="{{ page }}"><a href="?page={{ page }}">{{ page }}</a></li>
            {% endfor %}

            {% if articles.has_next %}
            <li class="page-nav" data-page="{{ articles.next_page_number }}"><a href="?page={{ articles.next_page_number }}"><i class="icon-angle-right"></i></a></li>
            <li class="page-nav" data-page="{{ articles.next_page_number }}"><a href="?page={{ articles.paginator.num_pages }}"><i class="icon-double-angle-right"></i></a></li>
            {% endif %}
        </ul>
    </div>
</div>
</div>
